# Lecture 01 - Kubernetes fundaments

## Introduction to the instructors

### Nicklas Marc Pedersen
WIP

### Anders Launer Bæk-Petersen

![Anders Launer Bæk-Petersen](https://avatars.githubusercontent.com/u/28479232?v=4)
- PhD Fellow ~ Center for Energy Informatics University of Southern Denmark
    - Transferable AI Model Development Framework for Smart Energy Systems
- Instustry for 4,5 years
    - Machine Learning Engineer ~ Energinet
    - Data Scientist ~ Esoft R&D
    - Research Assistant ~ Technical University of Denmark
- Master of Science in Mathematical Modelling and Computation ~ Technical University of Denmark 
- Bachlor of Science in Robot Systems ~ University of Southern Denmark 
- LinkedIn ~ [linkedin.com/in/anderslaunerbaek](https://www.linkedin.com/in/anderslaunerbaek/)

## Subject and objective for these exercises

The exercises for the first lecture is to introduce and refresh the nesseary components and terminology of Kubernetes. The below mentioned material have been sourced from [https://kubernetes.io/docs/tutorials/kubernetes-basics](https://kubernetes.io/docs/tutorials/kubernetes-basics/) and familizing with this content will be suffienct for progressing along the exercises. 


## Brief introduction to Kubernetes
WIP 

### [Kubernetes Basics](https://kubernetes.io/docs/tutorials/kubernetes-basics/)

WIP


![Kubernetes Cluster](https://d33wubrfki0l68.cloudfront.net/283cc20bb49089cb2ca54d51b4ac27720c1a7902/34424/docs/tutorials/kubernetes-basics/public/images/module_01_cluster.svg)
*Image from [kubernetes.io - Cluster Diagram. (Accessed: 04 September 2023)](https://d33wubrfki0l68.cloudfront.net/283cc20bb49089cb2ca54d51b4ac27720c1a7902/34424/docs/tutorials/kubernetes-basics/public/images/module_01_cluster.svg)*

### [Using kubectl to Create a Deployment](https://kubernetes.io/docs/tutorials/kubernetes-basics/deploy-app/deploy-intro/)

WIP

![ Deploying your first app on Kubernetes](https://d33wubrfki0l68.cloudfront.net/8700a7f5f0008913aa6c25a1b26c08461e4947c7/cfc2c/docs/tutorials/kubernetes-basics/public/images/module_02_first_app.svg)
*Image from [kubernetes.io - Deploying your first app on Kubernetes. (Accessed: 04 September 2023)](https://d33wubrfki0l68.cloudfront.net/8700a7f5f0008913aa6c25a1b26c08461e4947c7/cfc2c/docs/tutorials/kubernetes-basics/public/images/module_02_first_app.svg)*

### [Viewing Pods and Nodes](https://kubernetes.io/docs/tutorials/kubernetes-basics/explore/explore-intro/)
WIP
#### Pods
WIP
![Pods overview](https://d33wubrfki0l68.cloudfront.net/fe03f68d8ede9815184852ca2a4fd30325e5d15a/98064/docs/tutorials/kubernetes-basics/public/images/module_03_pods.svg)
*Image from [kubernetes.io - Pods overview. (Accessed: 04 September 2023)](https://d33wubrfki0l68.cloudfront.net/fe03f68d8ede9815184852ca2a4fd30325e5d15a/98064/docs/tutorials/kubernetes-basics/public/images/module_03_pods.svg)*

#### Nodes
WIP
![Node overview](https://d33wubrfki0l68.cloudfront.net/5cb72d407cbe2755e581b6de757e0d81760d5b86/a9df9/docs/tutorials/kubernetes-basics/public/images/module_03_nodes.svg)
*Image from [kubernetes.io - Node overview. (Accessed: 04 September 2023)](https://d33wubrfki0l68.cloudfront.net/5cb72d407cbe2755e581b6de757e0d81760d5b86/a9df9/docs/tutorials/kubernetes-basics/public/images/module_03_nodes.svg)*


#### Troubleshooting with kubectl
- `kubectl get` - list resources
- `kubectl describe` - show detailed information about a resource
- `kubectl logs <contianer name>` - print the logs from a container in a pod
- `kubectl exec <contianer name>` - execute a command on a container in a pod

### [Using a Service to Expose Your App](https://kubernetes.io/docs/tutorials/kubernetes-basics/expose/expose-intro/)
WIP
![Services and Labels](https://d33wubrfki0l68.cloudfront.net/7a13fe12acc9ea0728460c482c67e0eb31ff5303/2c8a7/docs/tutorials/kubernetes-basics/public/images/module_04_labels.svg)
*Image from [kubernetes.io - Services and Labels. (Accessed: 04 September 2023)](https://d33wubrfki0l68.cloudfront.net/7a13fe12acc9ea0728460c482c67e0eb31ff5303/2c8a7/docs/tutorials/kubernetes-basics/public/images/module_04_labels.svg)*


## Exercises
### Exercise 01 - Setup your Kubernetes environment
```
kubectl get
```
### Exercise 02 - Deploy your "Hello World" application

Deploy a basic nginx webapp with a "Hello World" application in Kubetenetes. 
The deployed application have the following contraints:
- four replica sets
- resource limit:
    - 128Mi memory
    - 250m cpu
- resource reserves:
    - 10Mi memory
    - 10m cpu

*Hint:* Find an example online and adapt the deployment file to meet the contraints.


### Exercise 03 - Validate your deployment

- List the pods generated by your deployment
- Validate the requested resource limit and resource reserve of your deployment

### Exercise 04 - Expose your "Hello World" application
Expose the application to localhost on port 30082 using the NodePort type. Take a screen dump of the browser

*Hint:* Find an example online and adapt the service file to reflect the keywords in the deployment file. Apply the service file and open the browser on localhost and the mentioned port.


### Exercise 05 - Scale your application 

Sometimes it my be desireble to scale your deployment up or down to match the demand of the application. Try to apply the steps below to rebalance the number of replica sets for the initial deployment.

- Document the current numbers of replicas 
- Scale manually up to 10 replicas
- Document the new numbers of replicas 
- Update deployment file to 2 replicas
- Document the final numbers of replicas


### Exercise 06 - Delete your "Hello World" application

Cleaning may sometimes be requried at the end of the day. 

-  Get the name of the deployment and service for your "Hello World" application
- Delete the services and the deployment